" custom mapping from Ben Orenstein
map <C-s> <esc>:w<CR>
imap <C-s> <esc>:w<CR>

" CTags
map <Leader>rt :!ctags --extra=+f -R *<CR><CR>
map <Leader>brt :!bundle list --paths=true \| xargs ctags --extra=+f --exclude=.git --exclude=log -R *<CR><CR>

" launch rspec on file
" map <C-t> <esc>:!bundle exec rspec % --drb --no-color --format documentation<CR>
map <C-t> :call RunCurrentSpecFile()<CR>
map <C-l> :call RunLastSpec()<CR>
map <C-a> :call RunAllSpecs()<CR>

" Userful git remapping
map <Leader>gs :Gstatus<CR>
map <Leader>gac :Gcommit -a -m ""<LEFT>
map <Leader>gc :Gcommit -m ""<LEFT>

" Navigate between views, controllers and models
map <Leader>cv :Rview<CR>
map <Leader>cc :Rcontroller<CR>
map <Leader>cm :Rmodel
map <Leader>cvv :RVview<CR>
map <Leader>ccv :RVcontroller<CR>
map <Leader>cmv :RVmodel<CR>

" destroy current buffer
map <Leader>w :bd<CR>
" split management
map <Leader>hs :split<CR>
map <Leader>vs :vsplit<CR>

" fold tag
map <Leader>ft Vatzf
" remap ESC movement
inoremap jj <ESC>


" quick edit vimrc shortcuts
map <Leader>es :e ~/.vim/shortcuts<CR>

" coding note for quick save ideas
map <Leader>tn :e /Volumes/Data/Dropbox/coding/notes.txt<CR>


" Opens an edit command with the path of the currently edited file filled in
" Normal mode: <Leader>e
map <Leader>e :e <C-R>=expand("%:p:h") . "/" <CR>

" Opens a tab edit command with the path of the currently edited file filled in
" Normal mode: <Leader>t
map <Leader>te :tabe <C-R>=expand("%:p:h") . "/" <CR>
map <C-S-left> :tabp<CR>
map <C-S-right> :tabn<CR>

" Inserts the path of the currently edited file into a command
" Command mode: Ctrl+P
cmap <C-P> <C-R>=expand("%:p:h") . "/" <CR>

" Bubble single lines
nmap <C-Up> ddkP
nmap <C-Down> ddp
" Bubble multiple lines
vmap <C-Up> xkP`[V`]
vmap <C-Down> xp`[V`]

" re-indent entire file
map   <silent> <F5> mmgg=G'm
imap  <silent> <F5> <Esc> mmgg=G'm
vmap  <tab> =
nmap  <tab> ==

" navigate buffers
noremap <S-left> :bprev<CR>Â·
noremap <S-right> :bnext<CR>

" disable arrow keys, use hjkl
noremap  <Up> ""
noremap  <Down> ""
noremap  <Left> ""
noremap  <Right> ""

" navigate split windows
nnoremap <c-j> <c-w>j
nnoremap <c-k> <c-w>k
nnoremap <c-h> <c-w>h
nnoremap <c-l> <c-w>l

" FuzzyFinder (was CommandT) [DEPRECTED?]
" map <Leader>t :FufCoverageFile<CR>

" CtrlP
map <Leader>n :CtrlP<CR>
let g:ctrlp_working_path_mode = 'ra'
let g:ctrlp_map = '<Leader>p'
let g:ctrlp_cmd = 'CtrlPMixed'

" toggle git gutter
map <Leader>g :ToggleGitGutter<CR>

" find merge conflict markers
nmap <silent> <leader>cf <ESC>/\v^[<=>]{7}( .*\|$)<CR>

" Execrus
map <C-E> :call g:Execrus()<CR>
map <C-\> :call g:Execrus('alternative')<CR>


